name: Render Remotion Video

on:
  workflow_dispatch:
    inputs:
      composition:
        description: 'Composition ID'
        required: true
      videoName:
        description: 'Nome do v√≠deo'
        required: true
      tipo:
        description: 'Tipo do v√≠deo'
        required: true
      duracao:
        description: 'Dura√ß√£o'
        required: true
      serveUrl:
        description: 'URL de onde o projeto est√° hospedado'
        required: true

jobs:
  render:
    runs-on: ubuntu-latest
    steps:
      - name: Render video
        run: |
          echo "üé¨ Iniciando renderiza√ß√£o"
          echo "Nome: ${{ github.event.inputs.videoName }}"
          echo "Tipo: ${{ github.event.inputs.tipo }}"
          echo "Dura√ß√£o: ${{ github.event.inputs.duracao }}"
          echo "Composition: ${{ github.event.inputs.composition }}"
          echo "Serve URL: ${{ github.event.inputs.serveUrl }}"

          npx remotion lambda render \
            "${{ github.event.inputs.serveUrl }}" \
            "${{ github.event.inputs.composition }}" \
            --input-props='{
              "videoName": "${{ github.event.inputs.videoName }}",
              "tipo": "${{ github.event.inputs.tipo }}",
              "duracao": ${{ github.event.inputs.duracao }}
            }'
